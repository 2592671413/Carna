<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Carna: Carna::SlicePlanes::SlicePlane Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<link href="doc_00style.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Carna&#160;<span id="projectnumber">Version 2.5.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_carna.html">Carna</a>      </li>
      <li class="navelem"><a class="el" href="namespace_carna_1_1_slice_planes.html">SlicePlanes</a>      </li>
      <li class="navelem"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html">SlicePlane</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Carna::SlicePlanes::SlicePlane Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Carna::SlicePlanes::SlicePlane" -->
<p>Definition and GPU-enhanced computation of planar volume intersections.  
 <a href="class_carna_1_1_slice_planes_1_1_slice_plane.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_slice_plane_8h_source.html">SlicePlane.h</a>&gt;</code></p>

<p><a href="class_carna_1_1_slice_planes_1_1_slice_plane-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49e2ad0172ef8fc455b5010a5b31f581"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::SlicePlane" ref="a49e2ad0172ef8fc455b5010a5b31f581" args="(base::view::SceneProvider &amp;, base::VisualizationEnvironment &amp;)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a49e2ad0172ef8fc455b5010a5b31f581">SlicePlane</a> (<a class="el" href="class_carna_1_1base_1_1view_1_1_scene_provider.html">base::view::SceneProvider</a> &amp;, <a class="el" href="class_carna_1_1base_1_1_visualization_environment.html">base::VisualizationEnvironment</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates using shared graphical resources. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a8ff26418f01ddf7dda36975814c559c9">SlicePlane</a> (const <a class="el" href="class_carna_1_1base_1_1model_1_1_scene.html">base::model::Scene</a> &amp;)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates using exclusive graphical resources.  <a href="#a8ff26418f01ddf7dda36975814c559c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2e4bc6e92952ed6f41f0c11361ae72d0"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::~SlicePlane" ref="a2e4bc6e92952ed6f41f0c11361ae72d0" args="()" -->
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a2e4bc6e92952ed6f41f0c11361ae72d0">~SlicePlane</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases resources. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a8e0690619ab3bec12caa8ff621bc4e5e">compute</a> (const <a class="el" href="namespace_carna_1_1base.html#a855ab0d54274e4927f57b140cae82a79">base::Vector</a> &amp;normal, const double &amp;distance, const <a class="el" href="namespace_carna_1_1base.html#a855ab0d54274e4927f57b140cae82a79">base::Vector</a> &amp;proportions, int windowingLevel, unsigned int windowingWidth, float border)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes intersection for the given parameters.  <a href="#a8e0690619ab3bec12caa8ff621bc4e5e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab9baf27602f9316408b618bf3fec1d15"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::getTangentToVolume" ref="ab9baf27602f9316408b618bf3fec1d15" args="() const " -->
const <a class="el" href="namespace_carna_1_1base.html#a73336b2424438d1eb18f46526da079b6">base::Transformation</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#ab9baf27602f9316408b618bf3fec1d15">getTangentToVolume</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the transformation from tangent space to <a class="el" href="_coordinate_systems.html">volume space</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5fb0b593fc85e0527597b3eac8db071d"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::getResultTextureID" ref="a5fb0b593fc85e0527597b3eac8db071d" args="() const " -->
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a5fb0b593fc85e0527597b3eac8db071d">getResultTextureID</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the ID of the GL texture object of the computed plane. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a77fefc6753e0fd310b5a0f958ff6a891"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::fetchResult" ref="a77fefc6753e0fd310b5a0f958ff6a891" args="(QImage &amp;) const " -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a77fefc6753e0fd310b5a0f958ff6a891">fetchResult</a> (QImage &amp;) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the result from video to system memory. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a400b4acb13c9932ec4d1da7fbd3e4630"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::isValid" ref="a400b4acb13c9932ec4d1da7fbd3e4630" args="() const " -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a400b4acb13c9932ec4d1da7fbd3e4630">isValid</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells whether this object represents a valid slice plane, which is determined by the success or the failure of a prior <a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a8e0690619ab3bec12caa8ff621bc4e5e">compute</a> call. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Definition and GPU-enhanced computation of planar volume intersections. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>There is <a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane_renderer.html">an adapter of this functionality</a> to the <a class="el" href="class_carna_1_1base_1_1view_1_1_renderer.html">base::view::Renderer</a> interface.</dd></dl>
<p>The internal state is set by the <a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a8e0690619ab3bec12caa8ff621bc4e5e">compute</a> method. If computation is successful, which means that <a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a400b4acb13c9932ec4d1da7fbd3e4630">isValid</a> returns <code>true</code>, than the results can be queried by:</p>
<ul>
<li><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a77fefc6753e0fd310b5a0f958ff6a891">Downloading image from video to system memory?</a></li>
<li><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a5fb0b593fc85e0527597b3eac8db071d">Continuing to use the image in video memory?</a></li>
<li><a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#ab9baf27602f9316408b618bf3fec1d15">Processing the orientation of the image?</a></li>
</ul>
<dl class="attention"><dt><b>Attention:</b></dt><dd>When specifying the intersectional plane, you must use <a class="el" href="_coordinate_systems.html#VolumeSpace">volume space coordinates</a>.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>The rotation of the image within the plane's tangent space is a degree of freedom and chosen by the underlying implementation: the chosen rotation ref Carna::SlicePlane::getTangentToVolume "can be detected easily" and processed in order to provide some fixed orientation.</dd></dl>
<div class="image">
<img src="SlicePlane01.png" alt="SlicePlane01.png"/>
<div class="caption">
intersection examples with two different planes</div></div>
 <dl class="author"><dt><b>Author:</b></dt><dd>Leonid Kostrykin </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>26.5.11 - 7.3.13 </dd></dl>

<p>Definition at line <a class="el" href="_slice_plane_8h_source.html#l00066">66</a> of file <a class="el" href="_slice_plane_8h_source.html">SlicePlane.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8ff26418f01ddf7dda36975814c559c9"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::SlicePlane" ref="a8ff26418f01ddf7dda36975814c559c9" args="(const base::model::Scene &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Carna::SlicePlanes::SlicePlane::SlicePlane </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_carna_1_1base_1_1model_1_1_scene.html">base::model::Scene</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Instantiates using exclusive graphical resources. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>Use <a class="el" href="class_carna_1_1base_1_1_offscreen_display.html">OffscreenDisplay</a> and <a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane_visualization.html">Carna::SlicePlanes::SlicePlaneVisualization</a> instead. </dd></dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8e0690619ab3bec12caa8ff621bc4e5e"></a><!-- doxytag: member="Carna::SlicePlanes::SlicePlane::compute" ref="a8e0690619ab3bec12caa8ff621bc4e5e" args="(const base::Vector &amp;normal, const double &amp;distance, const base::Vector &amp;proportions, int windowingLevel, unsigned int windowingWidth, float border)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Carna::SlicePlanes::SlicePlane::compute </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_carna_1_1base.html#a855ab0d54274e4927f57b140cae82a79">base::Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>normal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>distance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_carna_1_1base.html#a855ab0d54274e4927f57b140cae82a79">base::Vector</a> &amp;&#160;</td>
          <td class="paramname"><em>proportions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>windowingLevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>windowingWidth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>border</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Computes intersection for the given parameters. </p>
<p>Returns <code>true</code> if computation was successful or <code>false</code> if something went wrong. The validity state, which can be queried by <a class="el" href="class_carna_1_1_slice_planes_1_1_slice_plane.html#a400b4acb13c9932ec4d1da7fbd3e4630">isValid</a>, is updated to the returned value.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="group___math_tools.html#ga533d9cdf6888c4ae165400097138c202" title="Tells whether two objects are equal respectively to epsilon.">Carna::base::Math::isEqual</a>( normal.norm(), 0. ) == false</code></dd></dl>
<p>Most common reason for failure is the inability to compute at least three different intersection points of the given plane and the volume's bounding box. Usually this happens when the plane does not intersect the 3D volume but is tangent to some corner of the volume, like the plane \( \{ \vec x : \langle \vec x, \frac{1}{\sqrt 3}\big( 1, 1, 1 \big) \rangle = 0 \} \) does, for example.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">normal</td><td>Plane normal vector in <a class="el" href="_coordinate_systems.html#VolumeSpace">volume space coordinates</a>.</td></tr>
    <tr><td class="paramname">distance</td><td>Plane distance to origin in <a class="el" href="_coordinate_systems.html#VolumeSpace">volume space coordinates</a>.</td></tr>
    <tr><td class="paramname">proportions</td><td>Vector that describes the volume proportions. The longest side of the volume bounding box must be denoted with <code>1</code>, the other two sides proportional to the longest side.</td></tr>
    <tr><td class="paramname">windowingLevel</td><td>The HU value \(w_0\) that is to be mapped to RGB color \((127,127,127)\).</td></tr>
    <tr><td class="paramname">windowingWidth</td><td>The \(\delta w\) where<ol type="1">
<li>all values \(\leq w_0 - \delta w\) are mapped to black and all values \(&gt; \max\{ -1024, w_0 - \delta w \}\) not to black,</li>
<li>all values \(\geq w_0 + \delta w\) are mapped to white and all values \(&lt; \min\{ w_0 + \delta w, 3071 \}\) not to white.</li>
</ol>
</td></tr>
    <tr><td class="paramname">border</td><td>The width of the line that is to be drawn along the intersection of the slice plane with the volume's bounding box. No line is drawn if <em>border</em> is <code>0</code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/Carna/SlicePlanes/<a class="el" href="_slice_plane_8h_source.html">SlicePlane.h</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/>
    <address class="footer">
        <small>
			Written by <a href="http://evoid.de">Leonid Kostrykin</a> at the
            Chair of Medical Engineering (mediTEC),
            RWTH Aachen University <p>
            Documentation generated by <a href="http://www.doxygen.org/index.html"> Doxygen </a>
        </small>
    </address>

</body>
</html>
