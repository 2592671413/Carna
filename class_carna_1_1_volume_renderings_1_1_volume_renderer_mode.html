<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Carna: Carna::VolumeRenderings::VolumeRendererMode Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<link href="doc_00style.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Carna&#160;<span id="projectnumber">Version 2.5.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_carna.html">Carna</a>      </li>
      <li class="navelem"><a class="el" href="namespace_carna_1_1_volume_renderings.html">VolumeRenderings</a>      </li>
      <li class="navelem"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html">VolumeRendererMode</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Carna::VolumeRenderings::VolumeRendererMode Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Carna::VolumeRenderings::VolumeRendererMode" -->
<p>Abstract base class for <a class="el" href="class_carna_1_1_volume_renderings_1_1_default_volume_renderer.html#VolumeRendererRayMarching">ray marching</a> implementations.  
 <a href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_volume_renderer_mode_8h_source.html">VolumeRendererMode.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png"/> Inheritance diagram for Carna::VolumeRenderings::VolumeRendererMode:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode__inherit__graph.png" border="0" usemap="#_carna_1_1_volume_renderings_1_1_volume_renderer_mode_inherit__map" alt="Inheritance graph"/></div>
<map name="_carna_1_1_volume_renderings_1_1_volume_renderer_mode_inherit__map" id="_carna_1_1_volume_renderings_1_1_volume_renderer_mode_inherit__map">
<area shape="rect" id="node3" href="class_carna_1_1_volume_renderings_1_1_m_i_p_1_1_maximum_intensity_projection.html" title="VolumeRendererMode implementation that provides a maximum intensity projection." alt="" coords="363,5,739,32"/><area shape="rect" id="node5" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_single_pass_mode.html" title="Abstract implementation of VolumeRendererMode, suitable for all further implementations which do requ..." alt="" coords="363,56,738,83"/><area shape="rect" id="node7" href="class_carna_1_1_volume_renderings_1_1_d_r_r_1_1_x_ray.html" title="VolumeRendererMode that implements Digital Radiograph Reconstruction (DRR)." alt="" coords="839,31,1086,57"/><area shape="rect" id="node9" href="class_carna_1_1_volume_renderings_1_1_d_v_r_1_1_direct_volume_rendering.html" title="VolumeRendererMode implementation which simulates light absorption on the basis of a color map..." alt="" coords="787,81,1139,108"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png"/> Collaboration diagram for Carna::VolumeRenderings::VolumeRendererMode:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode__coll__graph.png" border="0" usemap="#_carna_1_1_volume_renderings_1_1_volume_renderer_mode_coll__map" alt="Collaboration graph"/></div>
<map name="_carna_1_1_volume_renderings_1_1_volume_renderer_mode_coll__map" id="_carna_1_1_volume_renderings_1_1_volume_renderer_mode_coll__map">
<area shape="rect" id="node2" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html" title="Abstract Renderer specialization that is supposed to utilize Ray Marching as it&#39;s rendering technique..." alt="" coords="21,264,299,291"/><area shape="rect" id="node4" href="class_carna_1_1base_1_1view_1_1_renderer.html" title="Represents the view component of a visualization and implements its rendering logic." alt="" coords="68,187,252,213"/><area shape="rect" id="node6" href="class_carna_1_1base_1_1view_1_1_scene_provider.html" title="Interfaces the data model from a view&#39;s perspective and provides graphical representations of model e..." alt="" coords="53,96,267,123"/><area shape="rect" id="node8" href="class_carna_1_1base_1_1model_1_1_scene.html" title="Defines the data model." alt="" coords="70,5,249,32"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a28a2c6a6b66710dc95a1e9a0c46ad29c">invalidate</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invalidates the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#abb21c93252327e03580121cbb575b338">renderer</a> this mode <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#ae535506b7245fcefcf777a567a54b030">was installed to</a>.  <a href="#a28a2c6a6b66710dc95a1e9a0c46ad29c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a6ce931c8e727358fdefc6f244f1d2187">VolumeRendererMode</a> (const std::string &amp;<a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#abe8917af30fb3578be2d38be49f9ca35">name</a>)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates.  <a href="#a6ce931c8e727358fdefc6f244f1d2187"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a71bf211ff3ccf8e50a88169c60be3aa2"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::~VolumeRendererMode" ref="a71bf211ff3ccf8e50a88169c60be3aa2" args="()" -->
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a71bf211ff3ccf8e50a88169c60be3aa2">~VolumeRendererMode</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases acquired GL resources. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9801d16d3737e954693e910c7be8474b"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::createControllerUI" ref="a9801d16d3737e954693e910c7be8474b" args="()=0" -->
virtual QWidget *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a9801d16d3737e954693e910c7be8474b">createControllerUI</a> ()=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates and returns this mode's controller UI element or <code>nullptr</code> if it has none. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af3a876af32e27f1f10ac4b0c2225b9d7"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::renderColor" ref="af3a876af32e27f1f10ac4b0c2225b9d7" args="(RayMarching &amp;)=0" -->
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af3a876af32e27f1f10ac4b0c2225b9d7">renderColor</a> (<a class="el" href="class_carna_1_1_volume_renderings_1_1_ray_marching.html">RayMarching</a> &amp;)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs the rendering. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a2878d62c57867c9483b65f03fa3339f6">renderDepth</a> (<a class="el" href="class_carna_1_1_volume_renderings_1_1_ray_marching.html">RayMarching</a> &amp;)=0</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reproduces the depth buffer belonging to the result of a <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af3a876af32e27f1f10ac4b0c2225b9d7">renderColor</a> invocation as a gray-scale image, that is close in time.  <a href="#a2878d62c57867c9483b65f03fa3339f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#ad155ab2433efeaedf6b384cb5a5d6ffb">prepareForRenderer</a> (<a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> &amp;renderer)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Associates this mode with a particular renderer.  <a href="#ad155ab2433efeaedf6b384cb5a5d6ffb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a462cc184714ae69280b4cbf33af24004">start</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked when this mode is start.  <a href="#a462cc184714ae69280b4cbf33af24004"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a92c5bb009525fc23a3f11baaa2e23ef2">stop</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked when this mode is stop.  <a href="#a92c5bb009525fc23a3f11baaa2e23ef2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a555c93c1ec1ebcfa6d8ab21251140d6a">resizeBuffers</a> (int width, int height)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Must be invoked when associated renderer is resized. The <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> implementations does so.  <a href="#a555c93c1ec1ebcfa6d8ab21251140d6a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#abb21c93252327e03580121cbb575b338">renderer</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">References the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> this mode was associated with.  <a href="#abb21c93252327e03580121cbb575b338"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a9df4147a0b1b30c14dcb8b51f3484eed">renderer</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">References the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> this mode was associated with.  <a href="#a9df4147a0b1b30c14dcb8b51f3484eed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d">isInitialized</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells whether <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#ad155ab2433efeaedf6b384cb5a5d6ffb">prepareForRenderer</a> already has been invoked.  <a href="#af0355e5378dae09371594f5b1fa1d87d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abe8917af30fb3578be2d38be49f9ca35"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::name" ref="abe8917af30fb3578be2d38be49f9ca35" args="" -->
const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#abe8917af30fb3578be2d38be49f9ca35">name</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the name of this mode. <br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af122194c09c26a4f662ce9578e599785">paintObjects3D</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Paints 3D objects with respect to the renderer's current <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#a001c4ce76ab58ab2792f2bd069c0a2a5">rotation offset setting</a>.  <a href="#af122194c09c26a4f662ce9578e599785"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Abstract base class for <a class="el" href="class_carna_1_1_volume_renderings_1_1_default_volume_renderer.html#VolumeRendererRayMarching">ray marching</a> implementations. </p>
<p>Carna comes with several ''out-of-the-box'' implementations:</p>
<ul>
<li><a class="el" href="class_carna_1_1_volume_renderings_1_1_d_r_r_1_1_x_ray.html">Digital Radiograph Reconstruction (DRR)</a></li>
<li><a class="el" href="class_carna_1_1_volume_renderings_1_1_m_i_p_1_1_maximum_intensity_projection.html">Multi-Channel Maximum Intensity Projection (MIP)</a></li>
<li><a class="el" href="class_carna_1_1_volume_renderings_1_1_d_v_r_1_1_direct_volume_rendering.html">Direct Volume Rendering (DVR)</a></li>
</ul>
<h2><a class="anchor" id="VolumeRendererMode_Lifecycle"></a>
VolumeRendererMode Lifecycle</h2>
<p>Each instance of this class runs through a sequence of states as illustrated by the state diagram below.</p>
<div class="image">
<img src="VolumeRendererModeStates.png" alt="VolumeRendererModeStates.png"/>
<div class="caption">
VolumeRendererMode states and legal state transitions</div></div>
<p> The state transitions are documented in detail below. As you can take from the diagram, each instance can only be associated once with a particular renderer.</p>
<dl class="user"><dt><b>Installation</b></dt><dd></dd></dl>
<p>Method <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#ad155ab2433efeaedf6b384cb5a5d6ffb">prepareForRenderer</a> is called by the renderer during <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#ae535506b7245fcefcf777a567a54b030">installation</a>. The instance is associated with the given renderer.</p>
<p>The implementation acquires all permanently required GL objects, such as textures or framebuffers. This is <em>not</em> the right moment for GL state setup to take place.</p>
<dl class="user"><dt><b>Activation / Deactivation</b></dt><dd></dd></dl>
<p>Method <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a462cc184714ae69280b4cbf33af24004">start</a> is called by the renderer when the mode is activated through <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#aea234e606484e7dcd727cf2d6c2ded1a">VolumeRenderer::setMode</a>. The GL state is set up properly. If there are any timers to start than this is where it should be done.</p>
<p>Method <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a92c5bb009525fc23a3f11baaa2e23ef2">stop</a> is called by the renderer when the mode is deactivated through <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#aea234e606484e7dcd727cf2d6c2ded1a">VolumeRenderer::setMode</a>. If there were any timers started priorly, this is when they should be stopped.</p>
<h2><a class="anchor" id="VolumeRendererModeImplementing"></a>
How to Implement</h2>
<p>Volume rendering is usually accomplished by ray marching. Refer to <a href="http://http.developer.nvidia.com/GPUGems3/gpugems3_ch30.html">''NVIDIA GPU Gems 3'', chapter 30.3, ''Rendering''</a> for deeper understanding of the technique.</p>
<p>Eventually, you will have to implement <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af3a876af32e27f1f10ac4b0c2225b9d7">renderColor</a> when deriving from this class. You might also want to implement <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a2878d62c57867c9483b65f03fa3339f6">renderDepth</a>, for certain <a class="el" href="namespace_carna_1_1stereoscopic.html">stereoscopic rendering modes</a> to work properly, though it isn't always senseful. You will also have to pick a unique mode name, that you will pass to the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#a6ce931c8e727358fdefc6f244f1d2187">VolumeRendererMode constructor</a>. For convenience reasons you should also create a static public field <code>NAME</code> inside your mode implementation class, that will hold that particular name.</p>
<p>Consider the code below as a tiny implementation example, that performs a single rendering pass with some custom shader:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;<a class="code" href="gl_error_8h.html" title="Defines the REPORT_GL_ERROR macro.">glError.h</a>&gt;</span>
<span class="preprocessor"> #include &lt;<a class="code" href="_ray_marching_8h.html" title="Defines Carna::VolumeRenderings::RayMarching.">RayMarching.h</a>&gt;</span>
<span class="preprocessor"> #include &lt;<a class="code" href="_volume_renderer_8h.html" title="Defines Carna::VolumeRenderings::VolumeRenderer.">VolumeRenderer.h</a>&gt;</span>

 <span class="keyword">using namespace </span>Carna;

 <span class="keywordtype">void</span> <a class="code" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af3a876af32e27f1f10ac4b0c2225b9d7" title="Performs the rendering.">MyVolumeRendererMode::renderColor</a>( RayMarching&amp; rendering )
 {
     <a class="code" href="gl_error_8h.html#afa400bc493439dbe4f27e561e2bb20ee" title="Queries the GL error state and prints it to the debug output.">REPORT_GL_ERROR</a>;

  <span class="comment">// try to load the resource files &#39;:/shaders/shader.frag&#39; and</span>
  <span class="comment">// &#39;:/shaders/shader.vert&#39; and build a shader program from them</span>

     ShaderProgram::Binding shader( rendering.renderer.shader( <span class="stringliteral">&quot;shader&quot;</span> ) );

     <a class="code" href="gl_error_8h.html#afa400bc493439dbe4f27e561e2bb20ee" title="Queries the GL error state and prints it to the debug output.">REPORT_GL_ERROR</a>;

  <span class="comment">// setup shader</span>

     shader.putUniform1i( <span class="stringliteral">&quot;volumeTexture&quot;</span>, rendering.volumeTextureSampler );
     shader.putUniform1i( <span class="stringliteral">&quot;sampleCount&quot;</span>, rendering.samples );

     <a class="code" href="gl_error_8h.html#afa400bc493439dbe4f27e561e2bb20ee" title="Queries the GL error state and prints it to the debug output.">REPORT_GL_ERROR</a>;

  <span class="comment">// invoke the ray marching shader</span>

     rendering.renderer.paintRectangle();

     <a class="code" href="gl_error_8h.html#afa400bc493439dbe4f27e561e2bb20ee" title="Queries the GL error state and prints it to the debug output.">REPORT_GL_ERROR</a>;
 }
</pre></div><p>The <a class="el" href="gl_error_8h.html#afa400bc493439dbe4f27e561e2bb20ee">REPORT_GL_ERROR</a> macros are optional.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>The example above illustrates the basic functionality that <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_single_pass_mode.html">VolumeRendererSinglePassMode</a> provides, except for the fact that it does allow setting any additional shader arguments by implementing <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_single_pass_mode.html#a685a0e3012a168c2d3942522670da0f8">configureShader</a>.</dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Leonid Kostrykin </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>8.8.11 - 20.3.13 </dd></dl>

<p>Definition at line <a class="el" href="_volume_renderer_mode_8h_source.html#l00138">138</a> of file <a class="el" href="_volume_renderer_mode_8h_source.html">VolumeRendererMode.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6ce931c8e727358fdefc6f244f1d2187"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::VolumeRendererMode" ref="a6ce931c8e727358fdefc6f244f1d2187" args="(const std::string &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Carna::VolumeRenderings::VolumeRendererMode::VolumeRendererMode </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Instantiates. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>names this mode uniquely - pick your clasS' name if in doubt. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a28a2c6a6b66710dc95a1e9a0c46ad29c"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::invalidate" ref="a28a2c6a6b66710dc95a1e9a0c46ad29c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Carna::VolumeRenderings::VolumeRendererMode::invalidate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invalidates the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#abb21c93252327e03580121cbb575b338">renderer</a> this mode <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#ae535506b7245fcefcf777a567a54b030">was installed to</a>. </p>
<p>If this mode hasn't been installed yet, nothing happens.</p>
<dl class="since"><dt><b>Since:</b></dt><dd><a class="el" href="_version_log.html#v_2_1">API Version 2.1</a> </dd></dl>

</div>
</div>
<a class="anchor" id="af0355e5378dae09371594f5b1fa1d87d"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::isInitialized" ref="af0355e5378dae09371594f5b1fa1d87d" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Carna::VolumeRenderings::VolumeRendererMode::isInitialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tells whether <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#ad155ab2433efeaedf6b384cb5a5d6ffb">prepareForRenderer</a> already has been invoked. </p>
<p>This is usually done through <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#ae535506b7245fcefcf777a567a54b030">VolumeRenderer::installMode</a>. Also see the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#VolumeRendererMode_Lifecycle">lifecycle documentation</a>. </p>

<p>Definition at line <a class="el" href="_volume_renderer_mode_8h_source.html#l00238">238</a> of file <a class="el" href="_volume_renderer_mode_8h_source.html">VolumeRendererMode.h</a>.</p>

</div>
</div>
<a class="anchor" id="af122194c09c26a4f662ce9578e599785"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::paintObjects3D" ref="af122194c09c26a4f662ce9578e599785" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Carna::VolumeRenderings::VolumeRendererMode::paintObjects3D </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Paints 3D objects with respect to the renderer's current <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html#a001c4ce76ab58ab2792f2bd069c0a2a5">rotation offset setting</a>. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d" title="Tells whether prepareForRenderer already has been invoked.">isInitialized()</a></code></dd></dl>
<p>When deriving from this class, one should always prefer this method for drawing <a class="el" href="class_carna_1_1base_1_1model_1_1_object3_d.html">3D objects</a> over <code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#abb21c93252327e03580121cbb575b338" title="References the VolumeRenderer this mode was associated with.">renderer()</a>.provider.paintObjects3D()</code>. </p>

</div>
</div>
<a class="anchor" id="ad155ab2433efeaedf6b384cb5a5d6ffb"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::prepareForRenderer" ref="ad155ab2433efeaedf6b384cb5a5d6ffb" args="(VolumeRenderer &amp;renderer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Carna::VolumeRenderings::VolumeRendererMode::prepareForRenderer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> &amp;&#160;</td>
          <td class="paramname"><em>renderer</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Associates this mode with a particular renderer. </p>
<p>Shall be overridden when any GL objects need to be acquired.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d" title="Tells whether prepareForRenderer already has been invoked.">isInitialized()</a> == false</code> </dd></dl>

<p>Reimplemented in <a class="el" href="class_carna_1_1_volume_renderings_1_1_d_v_r_1_1_direct_volume_rendering.html#a6421f74015b27e81cfd989ead75bcea3">Carna::VolumeRenderings::DVR::DirectVolumeRendering</a>, and <a class="el" href="class_carna_1_1_volume_renderings_1_1_m_i_p_1_1_maximum_intensity_projection.html#a35461d796374c8dffcca17d2525a77a0">Carna::VolumeRenderings::MIP::MaximumIntensityProjection</a>.</p>

</div>
</div>
<a class="anchor" id="a2878d62c57867c9483b65f03fa3339f6"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::renderDepth" ref="a2878d62c57867c9483b65f03fa3339f6" args="(RayMarching &amp;)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Carna::VolumeRenderings::VolumeRendererMode::renderDepth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_carna_1_1_volume_renderings_1_1_ray_marching.html">RayMarching</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reproduces the depth buffer belonging to the result of a <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af3a876af32e27f1f10ac4b0c2225b9d7">renderColor</a> invocation as a gray-scale image, that is close in time. </p>
<p>The brighter the color, the closer the pixel. </p>

<p>Implemented in <a class="el" href="class_carna_1_1_volume_renderings_1_1_d_v_r_1_1_direct_volume_rendering.html#adaa690891bb681c6262ed7b039406d5d">Carna::VolumeRenderings::DVR::DirectVolumeRendering</a>, <a class="el" href="class_carna_1_1_volume_renderings_1_1_m_i_p_1_1_maximum_intensity_projection.html#a8afac108eb2a30c316219ddad03598b3">Carna::VolumeRenderings::MIP::MaximumIntensityProjection</a>, and <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_single_pass_mode.html#ad86b1935d142c35bb74282bfb988968a">Carna::VolumeRenderings::VolumeRendererSinglePassMode</a>.</p>

</div>
</div>
<a class="anchor" id="abb21c93252327e03580121cbb575b338"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::renderer" ref="abb21c93252327e03580121cbb575b338" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a>&amp; Carna::VolumeRenderings::VolumeRendererMode::renderer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>References the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> this mode was associated with. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d" title="Tells whether prepareForRenderer already has been invoked.">isInitialized()</a></code> </dd></dl>

</div>
</div>
<a class="anchor" id="a9df4147a0b1b30c14dcb8b51f3484eed"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::renderer" ref="a9df4147a0b1b30c14dcb8b51f3484eed" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a>&amp; Carna::VolumeRenderings::VolumeRendererMode::renderer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>References the <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> this mode was associated with. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d" title="Tells whether prepareForRenderer already has been invoked.">isInitialized()</a></code> </dd></dl>

<p>Definition at line <a class="el" href="_volume_renderer_mode_8h_source.html#l00226">226</a> of file <a class="el" href="_volume_renderer_mode_8h_source.html">VolumeRendererMode.h</a>.</p>

</div>
</div>
<a class="anchor" id="a555c93c1ec1ebcfa6d8ab21251140d6a"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::resizeBuffers" ref="a555c93c1ec1ebcfa6d8ab21251140d6a" args="(int width, int height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Carna::VolumeRenderings::VolumeRendererMode::resizeBuffers </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Must be invoked when associated renderer is resized. The <a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer.html">VolumeRenderer</a> implementations does so. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d" title="Tells whether prepareForRenderer already has been invoked.">isInitialized()</a></code></dd></dl>
<p>Shall be reimplemented when any buffers need to be resized. </p>

<p>Reimplemented in <a class="el" href="class_carna_1_1_volume_renderings_1_1_d_v_r_1_1_direct_volume_rendering.html#a534cae1c8abdc86b35302703d73ed8df">Carna::VolumeRenderings::DVR::DirectVolumeRendering</a>, and <a class="el" href="class_carna_1_1_volume_renderings_1_1_m_i_p_1_1_maximum_intensity_projection.html#a86680b2714b14aa2104a3c2f61058c62">Carna::VolumeRenderings::MIP::MaximumIntensityProjection</a>.</p>

</div>
</div>
<a class="anchor" id="a462cc184714ae69280b4cbf33af24004"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::start" ref="a462cc184714ae69280b4cbf33af24004" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Carna::VolumeRenderings::VolumeRendererMode::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invoked when this mode is start. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d" title="Tells whether prepareForRenderer already has been invoked.">isInitialized()</a></code></dd></dl>
<p>This is the right place e.g. for starting timers or setting up the GL state. </p>

<p>Reimplemented in <a class="el" href="class_carna_1_1_volume_renderings_1_1_d_v_r_1_1_direct_volume_rendering.html#abfa3abaa765ffa8aa30e633e5886dfe2">Carna::VolumeRenderings::DVR::DirectVolumeRendering</a>, and <a class="el" href="class_carna_1_1_volume_renderings_1_1_m_i_p_1_1_maximum_intensity_projection.html#a819047d9a172ba717aaf927b60ca3e2b">Carna::VolumeRenderings::MIP::MaximumIntensityProjection</a>.</p>

</div>
</div>
<a class="anchor" id="a92c5bb009525fc23a3f11baaa2e23ef2"></a><!-- doxytag: member="Carna::VolumeRenderings::VolumeRendererMode::stop" ref="a92c5bb009525fc23a3f11baaa2e23ef2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Carna::VolumeRenderings::VolumeRendererMode::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invoked when this mode is stop. </p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd><code><a class="el" href="class_carna_1_1_volume_renderings_1_1_volume_renderer_mode.html#af0355e5378dae09371594f5b1fa1d87d" title="Tells whether prepareForRenderer already has been invoked.">isInitialized()</a></code></dd></dl>
<p>This is the right place e.g. for stopping timers. </p>

<p>Reimplemented in <a class="el" href="class_carna_1_1_volume_renderings_1_1_d_v_r_1_1_direct_volume_rendering.html#a4f922ebeab27e6b9baa5f94ce1ab898c">Carna::VolumeRenderings::DVR::DirectVolumeRendering</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/Carna/VolumeRenderings/<a class="el" href="_volume_renderer_mode_8h_source.html">VolumeRendererMode.h</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/>
    <address class="footer">
        <small>
			Written by <a href="http://evoid.de">Leonid Kostrykin</a> at the
            Chair of Medical Engineering (mediTEC),
            RWTH Aachen University <p>
            Documentation generated by <a href="http://www.doxygen.org/index.html"> Doxygen </a>
        </small>
    </address>

</body>
</html>
